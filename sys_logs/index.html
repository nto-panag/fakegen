<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>AttPl-Special Edition</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.js"></script>
    <style>
        body { 
    background: #fcf4e6;
    color: #3e2723; 
    font-family: 'Segoe UI', Tahoma, sans-serif; 
    padding: 10px; 
    font-size: 16px; 
}
body { background-image: url('bg-tile.jpg'); background-repeat: repeat; color: #3e2723; font-family: 'Segoe UI', Tahoma, sans-serif; padding: 10px; font-size: 16px; } 
        .container { 
    max-width: 80%; 
    width: 980px; 
    margin: 20px auto;
    background: rgba(252, 244, 230, 0.96); 
    padding: 15px; 
    border: 2px solid #8b4513; 
    border-radius: 8px; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
}
.header-feng { 
    text-align: center; 
    margin-bottom: 15px; 
    background: #8b4513; /* ÎšÎ±Ï†Î­ Ï†ÏŒÎ½Ï„Î¿ Î³Î¹Î± Î½Î± Î¾ÎµÏ‡Ï‰ÏÎ¯Î¶ÎµÎ¹ Î¿ Ï„Î¯Ï„Î»Î¿Ï‚ */
    color: white; 
    padding: 8px; 
    border-radius: 5px;
}
.header-feng h2 { 
    margin: 0; 
    font-size: 16px; 
    display: inline-block; /* Î“Î¹Î± Î½Î± Î¼Ï€Î±Î¯Î½Î¿Ï…Î½ Î´Î¯Ï€Î»Î±-Î´Î¯Ï€Î»Î± Î±Î½ Ï‡ÏÎµÎ¹Î±ÏƒÏ„ÎµÎ¯ */
}
.header-feng span.vivi { 
    color: #ffeb3b; /* ÎšÎ¯Ï„ÏÎ¹Î½Î¿ Î³Î¹Î± Î½Î± "Ï‡Ï„Ï…Ï€Î¬ÎµÎ¹" ÏƒÏ„Î¿ ÎºÎ±Ï†Î­ */
    font-weight: bold; 
}
        #date_display { text-align: center; font-weight: bold; font-size: 16px; color: #196649; margin-bottom: 15px; }
        .inline-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; border-top: 2px solid #8b4513; padding-top: 10px; font-weight: bold; font-size: 13px; flex-wrap: wrap; }
        .small-input { width: 20px !important; text-align: center; border: 1px solid #8b4513; }
        .sleep-select { border: 1px solid #d63384; background: #fff0f5; font-weight: bold; color: #d63384; border-radius: 4px; }
        textarea { 
    width: 70%;  /* Î Î¹Î¬Î½ÎµÎ¹ ÏŒÎ»Î¿ Ï„Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Ï„Î¿Ï… div Ï„Î¿Ï… */
    height: 300px; /* Î•Î´Ï Î¿ÏÎ¯Î¶ÎµÎ¹Ï‚ Ï€ÏŒÏƒÎ¿ Î¼Î±ÎºÏÏ Î¸Î± ÎµÎ¯Î½Î±Î¹ Ï„Î¿ ÎºÎ¿Ï…Ï„Î¯ */
    border: 1px solid #8b4513;
    font-family: monospace; 
    font-size: 14px; 
    padding: 10px; 
    box-sizing: border-box; 
    resize: vertical; /* Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÏƒÏ„Î¿ Ï‡ÏÎ®ÏƒÏ„Î· Î½Î± Ï„Î¿ Î¼ÎµÎ³Î±Î»ÏÏƒÎµÎ¹ Î¼ÏŒÎ½Î¿ Ï€ÏÎ¿Ï‚ Ï„Î± ÎºÎ¬Ï„Ï‰ */
    overflow-y: auto; /* Î•Î¼Ï†Î±Î½Î¯Î¶ÎµÎ¹ scrollbar Î±Î½ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï Î¼ÎµÎ³Î¬Î»Î¿ */
}
        .btn-calc { background-color: #43b581; color: white; padding: 14px; border: 1px solid #274d32; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold; font-size: 18px; margin-top: 10px; }
        .btn-copy { background-color: #8b4513; color: white; padding: 12px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 8px; display: none; }
        .vis-table { width: 100%; border-collapse: collapse; }
        .vis-table th, .vis-table td { border: 1px solid #7d5d3b; padding: 8px; text-align: center; }
        .launch-time { color: #ff0000; font-weight: bold; }
.footer-gemini { 
    text-align: center; 
    margin-top: 12px; 
    font-size: 10px; 
    font-weight: bold; 
    color: #8b4513; 
    padding-top: 5px; /* ÎœÎ¹ÎºÏÏÎ½Î±Î¼Îµ ÎºÎ±Î¹ Ï„Î¿ ÎºÎµÎ½ÏŒ Ï„ÏÏÎ± Ï€Î¿Ï… Î­Ï†Ï…Î³Îµ Î· Î³ÏÎ±Î¼Î¼Î® */
}border-top: 3px dashed #8b4513; padding-top: 15px; }
        #custom-alert { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #8b0000; color: white; padding: 20px; border: 3px solid #ff0000; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 10000; font-weight: bold; text-align: center; font-size: 18px; }
    </style>
</head>
<div id="custom-alert" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #8b0000; color: white; padding: 20px; border: 3px solid #ff0000; border-radius: 10px; z-index: 10000;">
    Î¤Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± Ï„Î¿Î½ ÎµÏ‡ÎµÎ¹ Î¿ feng.ÎºÏÏ…Î¼Î­Î½Î¿ ÏƒÏ„Î¿ 001 Ï‡Ï‰ÏÎ¹ÏŒ
</div>
<body oncontextmenu="return false;">
<div id="protected-content" style="display:none;">
    <div class="container">
	<div class="header-feng">
<h2>Attact + fake plan by feng for my friends<br>
<span style="font-size: 12px; font-weight: normal; opacity: 0.8;">(ÎšÏÎ´Î¹ÎºÎ±Ï‚ on Shinko to Kuma)</span></h2>

</div>
        <div id="date_display"></div>
        <h2 style="text-align: center; font-size: 14px; color: #5d2e0d; margin-top: 0;">Î•Ï€Î¹ÎºÏŒÎ»Î·ÏƒÎ· Î»Î¯ÏƒÏ„Î±Ï‚ Ï‡Ï‰ÏÎ¹ÏÎ½ Î±Ï€ÏŒ Ï„Î¿ profil Ï€Î±Î¹ÎºÏ„Î· (Î¦Î¹Î»Ï„ÏÎ¬ÏÎµÎ¹ Î¼ÏŒÎ½Î¿ ÏƒÏ…Î½Ï„ÎµÏ„Î±Î³Î¼Î­Î½ÎµÏ‚)</h2>
        <h2 style="text-align: center; font-size: 14px; color: #5d2e0d; margin-top: 0;">Î•Ï€Î¹ÎºÏŒÎ»Î·ÏƒÎ· Î±Ï€Î¿ <a href="https://forum.fyletikesmaxes.gr/index.php?threads/30012/" target="_blank" style="color: #8b4513; text-decoration: none; font-weight: bold;">Map script</a> Î® Î¼Îµ Ï„Î¿ Ï‡Î­ÏÎ¹ 6 Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚ ( Ï€ÏÎ¿ÏƒÎ¸ÎµÏ„ÎµÎ¹ Ï„Î¿ | )</h2>
<div class="inline-row" style="justify-content: center; flex-wrap: nowrap; gap: 10px;">
            <label>Î†Ï†Î¹Î¾Î·:</label>
            <input type="text" id="datetimepicker" style="width:130px;" readonly>

            <label>ÎœÎ¿Î½Î¬Î´Î±:</label>
            <select id="unit">
                <option value="35">Î‘ÏÎ¹ÏƒÏ„Î¿ÎºÏÎ¬Ï„Î·Ï‚</option>
                <option value="30" selected>ÎšÏÎ¹ÏŒÏ‚</option>
                <option value="9">Î‘Î½Î¹Ï‡Î½ÎµÏ…Ï„Î®Ï‚</option>
                <option value="11">Î’Î±ÏÏ</option>
                <option disabled>â”€-Î±Î¼Ï…Î½Ï„Î¹ÎºÎ­Ï‚-â”€</option>
                <option value="10">Î Î±Î»Î±Î½Ï„Î¯Î½</option>
				<option value="11">Î’Î±ÏÏ</option>
                <option value="18">Î”ÏŒÏÏ…</option>
                <option value="22">ÎÎ¯Ï†Î¿Ï‚</option>
            </select>
			<label>Î¤M:</label>
<input type="text" id="unit_speed" class="small-input" value="0.625" style="width: 35px !important;" readonly>
<label style="background:#fce4ec; padding:2px 8px; border-radius:4px; cursor:pointer;">
            <label style="color:#d63384;">ğŸ’¤ ÎÏ€Î½Î¿Ï‚:</label>
            <select id="sleep_from" class="sleep-select">
                <option value="0">00:00</option>
                <option value="23">23:00</option>
            </select>
            <label>-</label>
            <select id="sleep_to" class="sleep-select">
                <option value="24" selected>24:00</option>
            </select>   
</label>
<label style="background:#fce4ec; padding:2px 8px; border-radius:4px; cursor:pointer;">
    <input type="checkbox" id="no_sleep" checked> <b>Î”ÎµÎ½ ÎºÎ¿Î¹Î¼Î¬Î¼Î±Î¹</b>
</label>
        </div>
 <div style="display: flex; gap: 15px; align-items: center; justify-content: center; margin: 20px 0;">  
    <div style="flex: 1; text-align: right;">
        <textarea id="sources" oninput="autoCoord(this)" placeholder="Î”Î¹ÎºÎ± Î¼Î¿Ï… Ï‡Ï‰ÏÎ¹Î±. ÎºÎ±Î»Î± ÎµÎ¹Î½Î±Î¹ Î½Î± Ï…Ï€Î±ÏÏ‡Î¿Ï…Î½ ÏƒÎµ ÎµÎ½Î± txt" style="width: 60%; height: 250px;"></textarea>
    </div>

    <div style="text-align: center; min-width: 150px; padding: 10px; border: 1px dashed #8b4513; border-radius: 8px; background: rgba(139, 69, 19, 0.05);">
        <label style="display: block; font-weight: bold; margin-bottom: 8px; font-size: 13px;">ÎšÎŸÎ£ÎœÎŸÎ£</label>
        <select id="world_speed" style="width: 100%; font-weight: bold; padding: 5px; height: 35px; cursor: pointer;" onchange="updateSpeeds(this.value)">
            <option value="2.0" data-m="0.5">K100 (2.0 / 0.5)</option>            
            <option value="1.0" data-m="1.0">K101 (1.0 / 1.0)</option>        
            <option value="1.2" data-m="0.8">K102 (1.2 / 0.8)</option>
            <option value="1.0" data-m="1.0">K103 (1.0 / 1.0)</option>
            <option value="1.6" selected data-m="0.625">K104 (1.6 / 0.625)</option>
        </select>
        <input type="hidden" id="unit_speed" value="0.625">
    </div>

    <div style="flex: 1; text-align: left;">
        <textarea id="targets" oninput="autoCoord(this)" placeholder="Î£Ï„ÏŒÏ‡Î¿Î¹. " style="width: 60%; height: 250px;"></textarea>
    </div>
</div>
        </div>
        <button class="btn-calc" onclick="calculatePlan()">Î¦Î¤Î™Î‘ÎÎ• Î Î›Î‘ÎÎŸ</button>
        <button id="copyBtn" class="btn-copy" onclick="copyToClipboard()">ğŸ“‘ Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î— BB-CODE Ï„Î±Î¾Î¹Î½Î¿Î¼Î·Î¼Î­Î½Î± ÎºÎ±Ï„Î¬ ÏÏÎ±</button>
        <div id="spoiler" style="display:none; margin-top:15px;"><div id="results_table"></div></div>
<div class="footer-gemini" style="color: #8b4513;">âœ¨ Î’Î¿Î·Î¸Î¬ÎµÎ¹ Î¿ <a href="https://gemini.google.com" target="_blank" style="color: #8b4513; text-decoration: none; font-weight: bold;">Gemini 3 AI</a></div>
</div>

<script>
function autoCoord(el) {
    let raw = el.value;
    
    // 1. ÎœÎµÏ„Î±Ï„ÏÎ­Ï€ÎµÎ¹ Ï„Î± 6 ÏƒÏ…Î½ÎµÎ¶ÏŒÎ¼ÎµÎ½Î± Î½Î¿ÏÎ¼ÎµÏÎ± ÏƒÎµ 123|456 ÎºÎ±Î¹ Ï€ÏÎ¿ÏƒÎ¸Î­Ï„ÎµÎ¹ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Î±Î»Î»Î±Î³Î® Î³ÏÎ±Î¼Î¼Î®Ï‚
    let processed = raw.replace(/\b(\d{3})(\d{3})\b/g, '$1|$2\n');
    
    // 2. Î•Ï€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ ÎœÎŸÎÎŸ Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚, Ï„Î·Î½ ÎºÎ¬Î¸ÎµÏ„Î¿ |, ÎºÎ±Î¹ Ï„Î·Î½ Î±Î»Î»Î±Î³Î® Î³ÏÎ±Î¼Î¼Î®Ï‚
    // ÎŸÏ„Î¹Î´Î®Ï€Î¿Ï„Îµ Î¬Î»Î»Î¿ (Î³ÏÎ¬Î¼Î¼Î±Ï„Î±, ÎºÎµÎ½Î¬ ÏƒÏ„Î·Î½ Î±ÏÏ‡Î®, ÏƒÏÎ¼Î²Î¿Î»Î±) Ï„Î¿ ÎµÎ¾Î±Ï†Î±Î½Î¯Î¶ÎµÎ¹
    processed = processed.replace(/[^0-9|\n]/g, '');

    if (raw !== processed) {
        el.value = processed;
    }
}
function updateServerTime() {
    var t = new Date();
    document.getElementById('date_display').innerHTML = "ÎÏÎ± server: " + ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2) + ":" + ("0" + t.getSeconds()).slice(-2);
}
setInterval(updateServerTime, 1000);

$(function() { 
    $('#datetimepicker').datetimepicker({ dateFormat: 'dd/mm/yy', timeFormat: 'HH:mm:ss' }); 
    $('#datetimepicker').datetimepicker('setDate', new Date()); 
});

function calculatePlan() {
    const hitTimeStr = $('#datetimepicker').val();
    const parts = hitTimeStr.match(/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2}):(\d{2})/);
    const hitTimeMs = new Date(parts[3], parts[2]-1, parts[1], parts[4], parts[5], parts[6]).getTime();
    const unitValue = parseFloat($('#unit').val());
    const unitIcon = unitValue === 9 ? "spy" : (unitValue === 35 ? "snob" : (unitValue === 10 ? "knight" : (unitValue === 11 ? "heavy" : (unitValue === 18 ? "spear" : (unitValue === 22 ? "sword" : "ram")))));    
    const msPerField = (unitValue / (parseFloat($('#world_speed').val()) * parseFloat($('#unit_speed').val()))) * 60 * 1000;
    const sources = $('#sources').val().trim().split('\n'), targets = $('#targets').val().trim().split('\n');
    const sFrom = parseInt($('#sleep_from').val()), sTo = parseInt($('#sleep_to').val());
    const isNoSleep = $('#no_sleep').is(':checked');
    let attacks = [];

    sources.forEach(s => {
        targets.forEach(t => {
            const sC = s.match(/(\d+)\|(\d+)/), tC = t.match(/(\d+)\|(\d+)/);
            if (sC && tC) {
                const dist = Math.sqrt(Math.pow(sC[1]-tC[1], 2) + Math.pow(sC[2]-tC[2], 2));
                const lMs = hitTimeMs - (dist * msPerField);
                const d = new Date(lMs);
                const lHour = d.getHours();
                if (!isNoSleep) {
                    if (sFrom < sTo) { if (lHour >= sFrom && lHour < sTo) return; }
                    else { if (lHour >= sFrom || lHour < sTo) return; }
                }
                const lStr = ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2) + ":" + ("0" + d.getSeconds()).slice(-2) + " " + ("0" + d.getDate()).slice(-2) + "/" + ("0" + (d.getMonth() + 1)).slice(-2);
                attacks.push({ from: sC[0], to: tC[0], lMs: lMs, lStr: lStr });
            }
        });
    });
attacks.sort((a, b) => a.lMs - b.lMs);

    // Î Î¯Î½Î±ÎºÎ±Ï‚ Î¼Îµ Î‘/Î‘ ÎºÎ±Î¹ Î¼Î¹ÎºÏÏŒÏ„ÎµÏÎ± Î³ÏÎ¬Î¼Î¼Î±Ï„Î±
    let tableHtml = `<div style="text-align:right; font-weight:bold; margin-bottom:5px; font-size:12px;">Î£ÏÎ½Î¿Î»Î¿ Î•Î½Ï„Î¿Î»ÏÎ½: ${attacks.length}</div>`;
    tableHtml += `<table class="vis-table" style="font-size: 12px;"><tr><th>Î‘/Î‘</th><th>Î‘Ï€ÏŒ</th><th>Î ÏÎ¿Ï‚</th><th>Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·</th></tr>`;
    
    let bb = "";
    attacks.forEach((att, index) => {
        tableHtml += `<tr><td>${index + 1}</td><td>${att.from}</td><td>${att.to}</td><td class="launch-time">${att.lStr}</td></tr>`;
        bb += `[unit]${unitIcon}[/unit] [coord]${att.from}[/coord] -> [coord]${att.to}[/coord] | [b][color=#ff0000]${att.lStr}[/color][/b]\n`;
    });

    $('#results_table').html(tableHtml + "</table>");
    $('#bbcopy').remove(); 
    $('body').append(`<textarea id="bbcopy" style="display:none;">${bb}</textarea>`);
    $('#spoiler').show(); 
    $('#copyBtn').show();
}

function copyToClipboard() {
    var c = document.getElementById("bbcopy"); 
    c.style.display = "block"; 
    c.select(); 
    document.execCommand("copy"); 
    c.style.display = "none";
    document.getElementById("copyBtn").innerHTML = "âœ… Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î—ÎšÎ•!"; 
    setTimeout(function(){ 
        document.getElementById("copyBtn").innerHTML = "ğŸ“‘ Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î— BB-CODE"; 
    }, 2000);
}
window.onload = function() {
    document.getElementById("protected-content").style.display = "block";
};
// Î‘Ï€ÎµÎ»ÎµÏ…Î¸Î­ÏÏ‰ÏƒÎ· Î´ÎµÎ¾Î¹Î¿Ï ÎºÎ»Î¹Îº ÏƒÏ„Î± ÏƒÏ…Î³ÎºÎµÎºÏÎ¹Î¼Î­Î½Î± Ï€ÎµÎ´Î¯Î±
document.getElementById('sources').oncontextmenu = function(e) { e.stopPropagation(); };
document.getElementById('targets').oncontextmenu = function(e) { e.stopPropagation(); };
// Î•Î¼Ï†Î¬Î½Î¹ÏƒÎ· Ï„Î¿Ï… ÎºÏŒÎºÎºÎ¹Î½Î¿Ï… alert ÏƒÏ„Î¿ Î´ÎµÎ¾Î¯ ÎºÎ»Î¹Îº (ÎµÎºÏ„ÏŒÏ‚ Ï„Ï‰Î½ textareas)
document.oncontextmenu = function(e) {
    // Î‘Î½ Ï„Î¿ ÎºÎ»Î¹Îº Î´ÎµÎ½ Î­Î³Î¹Î½Îµ ÏƒÎµ textarea, Î´ÎµÎ¯Î¾Îµ Ï„Î¿ Î¼Î®Î½Ï…Î¼Î±
    if (e.target.tagName !== 'TEXTAREA') {
        var alertBox = document.getElementById('custom-alert');
        alertBox.style.display = 'block';
        
        // ÎšÏÏÏˆÏ„Î¿ Î¼ÎµÏ„Î¬ Î±Ï€ÏŒ 3 Î´ÎµÏ…Ï„ÎµÏÏŒÎ»ÎµÏ€Ï„Î±
        setTimeout(function() {
            alertBox.style.display = 'none';
        }, 3000);
    }
};
function updateSpeeds(worldSpeed) {
    const select = document.getElementById('world_speed');
    const selectedOption = select.options[select.selectedIndex];
    const unitSpeed = selectedOption.getAttribute('data-m');
    
    // Î•Î½Î·Î¼ÎµÏÏÎ½ÎµÎ¹ Ï„Î¿ Ï€ÎµÎ´Î¯Î¿ Îœ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±
    document.getElementById('unit_speed').value = unitSpeed;
    
    console.log("Î‘Î»Î»Î±Î³Î® ÎšÏŒÏƒÎ¼Î¿Ï…: K=" + worldSpeed + ", M=" + unitSpeed);
}
</script>
</body>
</html>
