<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <title>AttPl-Special Edition</title>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-ui-timepicker-addon/1.6.3/jquery-ui-timepicker-addon.min.js"></script>
    <style>
        body { 
    background: #fcf4e6; /* ÎˆÎ½Î± Ï‰ÏÎ±Î¯Î¿ Î¼Ï€ÎµÎ¶-ÎºÏÎµÎ¼ Ï€Î¿Ï… Ï„Î±Î¹ÏÎ¹Î¬Î¶ÎµÎ¹ Î¼Îµ Ï„Î¿ container ÏƒÎ¿Ï… */
    color: #3e2723; 
    font-family: 'Segoe UI', Tahoma, sans-serif; 
    padding: 10px; 
    font-size: 16px; 
}body { background-image: url('bg-tile.jpg'); background-repeat: repeat; color: #3e2723; font-family: 'Segoe UI', Tahoma, sans-serif; padding: 10px; font-size: 16px; } 
        .container { 
    max-width: 95%; /* Î“Î¹Î± Î½Î± Î¼Î·Î½ "Ï‡Ï„Ï…Ï€Î¬ÎµÎ¹" ÏƒÏ„Î¹Ï‚ Î¬ÎºÏÎµÏ‚ ÏƒÎµ ÎºÎ¹Î½Î·Ï„Î¬ Î® Î¼Î¹ÎºÏÎ­Ï‚ Î¿Î¸ÏŒÎ½ÎµÏ‚ */
    width: 1150px;  /* Î¤Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ Ï€Î¿Ï… Î¸Î­Î»ÎµÎ¹Ï‚ */
    margin: 20px auto; /* Î¤Î¿ 'auto' Î´ÎµÎ¾Î¹Î¬-Î±ÏÎ¹ÏƒÏ„ÎµÏÎ¬ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Ï… Ï„Î¿ Ï†Î­ÏÎ½ÎµÎ¹ ÏƒÏ„Î¿ ÎºÎ­Î½Ï„ÏÎ¿! */
    background: rgba(252, 244, 230, 0.96); 
    padding: 15px; 
    border: 2px solid #8b4513; 
    border-radius: 8px; 
    box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
}
        .header-feng { text-align: center; margin-bottom: 5px; }
        .header-feng h1 { color: #8b4513; margin: 0; font-size: 16px; }
        .header-feng h1 span.vivi { color: #ff0000; font-weight: bold; }
        #date_display { text-align: center; font-weight: bold; font-size: 16px; color: #196649; margin-bottom: 15px; }
        .inline-row { display: flex; align-items: center; gap: 8px; margin-bottom: 10px; border-top: 2px solid #8b4513; padding-top: 10px; font-weight: bold; font-size: 13px; flex-wrap: wrap; }
        .small-input { width: 20px !important; text-align: center; border: 1px solid #8b4513; }
        .sleep-select { border: 1px solid #d63384; background: #fff0f5; font-weight: bold; color: #d63384; border-radius: 4px; }
        textarea { 
    width: 60%;    /* Î“Î¹Î± Î½Î± Ï€Î¹Î¬Î½Î¿Ï…Î½ ÏŒÎ»Î¿ Ï„Î¿ Ï€Î»Î¬Ï„Î¿Ï‚ */
    height: 290px;  /* Î•Î´Ï Î±Î»Î»Î¬Î¶ÎµÎ¹Ï‚ Ï„Î¿ ÏÏˆÎ¿Ï‚ - Î²Î¬Î»Îµ 300 Î³Î¹Î± Î½Î± Î³Î¯Î½Î¿Ï…Î½ Î¼ÎµÎ³Î¬Î»Î± */
    border: 1px solid #8b4513; 
    font-family: monospace; 
    font-size: 14px; 
    padding: 10px; 
    box-sizing: border-box; 
    resize: vertical; /* Î£Î¿Ï… ÎµÏ€Î¹Ï„ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï„Î± Î¼ÎµÎ³Î±Î»ÏÎ½ÎµÎ¹Ï‚ Î¼Îµ Ï„Î¿ Ï€Î¿Î½Ï„Î¯ÎºÎ¹ Î¼ÏŒÎ½Î¿ Ï€ÏÎ¿Ï‚ Ï„Î± ÎºÎ¬Ï„Ï‰ */
}
        .btn-calc { background-color: #43b581; color: white; padding: 14px; border: 1px solid #274d32; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold; font-size: 18px; margin-top: 10px; }
        .btn-copy { background-color: #8b4513; color: white; padding: 12px; border: none; border-radius: 4px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 8px; display: none; }
        .vis-table { width: 100%; border-collapse: collapse; }
        .vis-table th, .vis-table td { border: 1px solid #7d5d3b; padding: 8px; text-align: center; }
        .launch-time { color: #ff0000; font-weight: bold; }
        .footer-gemini { text-align: center; margin-top: 12px; font-size: 10px; font-weight: bold; color: #5d2e0d; border-top: 3px dashed #8b4513; padding-top: 15px; }
        #custom-alert { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #8b0000; color: white; padding: 20px; border: 3px solid #ff0000; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.5); z-index: 10000; font-weight: bold; text-align: center; font-size: 18px; }
    </style>
</head>
<body oncontextmenu="return false;">
<div id="custom-alert">ÎºÎ±Ï„ÏƒÎ¯Ï„Î· Î‘Ï€Î±Î³Î¿ÏÎµÏÎµÏ„Î±Î¹ Î· ÎºÎ±Ï„Î±ÏƒÎºÎ¿Ï€ÎµÎ¯Î±! âš”ï¸</div>
<div id="protected-content" style="display:none;">
    <div class="container">
        <div class="header-feng"><h1>Attact + fake plan by feng <span class="vivi">for ...</span></h1><p>Î’Î±ÏƒÎ¹ÏƒÎ¼Î­Î½Î¿ ÏƒÏ„Î¿Î½ ÎºÏÎ´Î¹ÎºÎ± Ï„Î·Ï‚ Sophie (Shinko to Kuma)</p></div>
        <div id="date_display"></div>
        <h2 style="text-align: center; font-size: 14px; color: #5d2e0d; margin-top: 0;">Î•Ï€Î¹ÎºÏŒÎ»Î»Î·ÏƒÎ· Î»Î¯ÏƒÏ„Î±Ï‚ Ï‡Ï‰ÏÎ¹ÏÎ½ Î±Ï€ÏŒ Ï„Î¿ profil Ï€Î±Î¹ÎºÏ„Î· control+V (Î¦Î¹Î»Ï„ÏÎ¬ÏÎµÎ¹ Î¼ÏŒÎ½Î¿ ÏƒÏ…Î½Ï„ÎµÏ„Î±Î³Î¼Î­Î½ÎµÏ‚)</h2>
        <h2 style="text-align: center; font-size: 14px; color: #5d2e0d; margin-top: 0;">Î•Ï€Î¹ÎºÏŒÎ»Î»Î·ÏƒÎ· Î±Ï€Î¿ mapscript Î® Î¼Îµ Ï„Î¿ Ï‡Î­ÏÎ¹ 6 Î±ÏÎ¹Î¸Î¼Î¿ÏÏ‚ (Ï€ÏÎ¿ÏƒÎ¸ÎµÏ„ÎµÎ¹ Ï„Î¿ |)</h2>
        <h2 style="text-align: center; font-size: 14px; color: #5d2e0d; margin-top: 0;">Î‘Î»Î»Î¬Î¾Ï„Îµ Ï„Î·Î½ Ï„Î±Ï‡ÏÏ„Î·Ï„Î± ÎºÎ¿ÏƒÎ¼Î¿Ï… Î±Î½Î¬Î»Î¿Î³Î±</h2>
		           <div class="inline-row">
            <label>Î†Ï†Î¹Î¾Î·:</label><input type="text" id="datetimepicker" style="width:130px;" readonly>
            <label>ÎœÎ¿Î½Î¬Î´Î±:</label>
            <select id="unit">
                <option value="35">Î‘ÏÎ¹ÏƒÏ„Î¿ÎºÏÎ¬Ï„Î·Ï‚</option>
                <option value="30" selected>ÎšÏÎ¹ÏŒÏ‚</option>
                <option value="9">Î‘Î½Î¹Ï‡Î½ÎµÏ…Ï„Î®Ï‚</option>
                <option value="11">Î’Î±ÏÏ</option>
                <option disabled>â”€-Î±Î¼Ï…Î½Ï„Î¹ÎºÎ­Ï‚-â”€</option>
                <option value="10">Î Î±Î»Î±Î½Ï„Î¯Î½</option>
                <option value="18">Î”ÏŒÏÏ…</option>
                <option value="22">ÎÎ¯Ï†Î¿Ï‚</option>
            </select>
            <label>Îš:</label><input type="text" id="world_speed" class="small-input" value="1.2">
            <label>Îœ:</label><input type="text" id="unit_speed" class="small-input" value="0.8">
            
            <label style="color:#d63384; margin-left:5px;">ğŸ’¤ ÎÏ€Î½Î¿Ï‚ Î±Ï€ÏŒ:</label>
            <select id="sleep_from" class="sleep-select">
                <option value="0">00:00</option><option value="1">01:00</option><option value="2">02:00</option><option value="3">03:00</option><option value="4">04:00</option><option value="5">05:00</option><option value="6">06:00</option><option value="7">07:00</option><option value="8">08:00</option><option value="9">09:00</option><option value="10">10:00</option><option value="11">11:00</option><option value="12">12:00</option><option value="13">13:00</option><option value="14">14:00</option><option value="15">15:00</option><option value="16">16:00</option><option value="17">17:00</option><option value="18">18:00</option><option value="19">19:00</option><option value="20">20:00</option><option value="21">21:00</option><option value="22">22:00</option><option value="23">23:00</option><option value="24">24:00</option>
            </select>
            <label style="color:#d63384;">Î­Ï‰Ï‚:</label>
            <select id="sleep_to" class="sleep-select">
                <option value="0">00:00</option><option value="1">01:00</option><option value="2">02:00</option><option value="3">03:00</option><option value="4">04:00</option><option value="5">05:00</option><option value="6">06:00</option><option value="7">07:00</option><option value="8">08:00</option><option value="9">09:00</option><option value="10">10:00</option><option value="11">11:00</option><option value="12">12:00</option><option value="13">13:00</option><option value="14">14:00</option><option value="15">15:00</option><option value="16">16:00</option><option value="17">17:00</option><option value="18">18:00</option><option value="19">19:00</option><option value="20">20:00</option><option value="21">21:00</option><option value="22">22:00</option><option value="23">23:00</option><option value="24" selected >24:00</option>
            </select>   
            <label style="margin-left:10px; background:#fce4ec; padding:2px 5px; border-radius:4px;">
                <input type="checkbox" id="no_sleep" checked> <b>Î”ÎµÎ½ ÎºÎ¿Î¹Î¼Î¬Î¼Î±Î¹</b>
            </label>
        </div>

        <div style="display:flex; gap:12px;">
            <div style="flex:1;"><textarea id="sources" oninput="autoCoord(this)" placeholder="Nukes"></textarea></div>
            <div style="flex:1;"><textarea id="targets" oninput="autoCoord(this)" placeholder="Î£Ï„ÏŒÏ‡Î¿Î¹"></textarea></div>
        </div>
        <button class="btn-calc" onclick="calculatePlan()">Î¦Î¤Î™Î‘ÎÎ• Î Î›Î‘ÎÎŸ</button>
        <button id="copyBtn" class="btn-copy" onclick="copyToClipboard()">ğŸ“‘ Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î— BB-CODE</button>
        <div id="spoiler" style="display:none; margin-top:15px;"><div id="results_table"></div></div>
        <div class="footer-gemini">âœ¨ Î’Î¿Î·Î¸Î¬ÎµÎ¹ Î¿ <a href="https://gemini.google.com" target="_blank" style="color: #5d2e0d; text-decoration: underline; font-weight: bold;">Gemini 3 AI</a></div>
    </div>
</div>

<script>
function autoCoord(el) {
    let raw = el.value;
    raw = raw.replace(/\b(\d{3})(\d{3})\b/g, '$1|$2');
    let matches = raw.match(/\d{1,3}\|\d{1,3}/g);
    if (matches) {
        el.value = matches.join('\n');
    }
}

function updateServerTime() {
    var t = new Date();
    document.getElementById('date_display').innerHTML = "ÎÏÎ± server: " + ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2) + ":" + ("0" + t.getSeconds()).slice(-2);
}
setInterval(updateServerTime, 1000);

$(function() { 
    $('#datetimepicker').datetimepicker({ dateFormat: 'dd/mm/yy', timeFormat: 'HH:mm:ss' }); 
    $('#datetimepicker').datetimepicker('setDate', new Date()); 
});

function calculatePlan() {
    const hitTimeStr = $('#datetimepicker').val();
    const parts = hitTimeStr.match(/(\d{2})\/(\d{2})\/(\d{4}) (\d{2}):(\d{2}):(\d{2})/);
    const hitTimeMs = new Date(parts[3], parts[2]-1, parts[1], parts[4], parts[5], parts[6]).getTime();
    const unitValue = parseFloat($('#unit').val());
    const unitIcon = unitValue === 9 ? "spy" : (unitValue === 35 ? "snob" : (unitValue === 10 ? "knight" : (unitValue === 11 ? "heavy" : (unitValue === 18 ? "spear" : (unitValue === 22 ? "sword" : "ram")))));    
    const msPerField = (unitValue / (parseFloat($('#world_speed').val()) * parseFloat($('#unit_speed').val()))) * 60 * 1000;
    const sources = $('#sources').val().trim().split('\n'), targets = $('#targets').val().trim().split('\n');
    const sFrom = parseInt($('#sleep_from').val()), sTo = parseInt($('#sleep_to').val());
    const isNoSleep = $('#no_sleep').is(':checked');
    let attacks = [];

    sources.forEach(s => {
        targets.forEach(t => {
            const sC = s.match(/(\d+)\|(\d+)/), tC = t.match(/(\d+)\|(\d+)/);
            if (sC && tC) {
                const dist = Math.sqrt(Math.pow(sC[1]-tC[1], 2) + Math.pow(sC[2]-tC[2], 2));
                const lMs = hitTimeMs - (dist * msPerField);
                const d = new Date(lMs);
                const lHour = d.getHours();
                if (!isNoSleep) {
                    if (sFrom < sTo) { if (lHour >= sFrom && lHour < sTo) return; }
                    else { if (lHour >= sFrom || lHour < sTo) return; }
                }
                const lStr = ("0" + d.getHours()).slice(-2) + ":" + ("0" + d.getMinutes()).slice(-2) + ":" + ("0" + d.getSeconds()).slice(-2) + " " + ("0" + d.getDate()).slice(-2) + "/" + ("0" + (d.getMonth() + 1)).slice(-2);
                attacks.push({ from: sC[0], to: tC[0], lMs: lMs, lStr: lStr });
            }
        });
    });

    attacks.sort((a, b) => a.lMs - b.lMs);
    let tableHtml = `<table class="vis-table"><tr><th>Î‘Ï€ÏŒ</th><th>Î ÏÎ¿Ï‚</th><th>Î•ÎºÎºÎ¯Î½Î·ÏƒÎ·</th></tr>`;
    let bb = "";
    attacks.forEach((att) => {
        tableHtml += `<tr><td>${att.from}</td><td>${att.to}</td><td class="launch-time">${att.lStr}</td></tr>`;
        bb += `[unit]${unitIcon}[/unit] [coord]${att.from}[/coord] -> [coord]${att.to}[/coord] | [b][color=#ff0000]${att.lStr}[/color][/b]\n`;
    });
    $('#results_table').html(tableHtml + "</table>");
    $('#bbcopy').remove(); $('body').append(`<textarea id="bbcopy" style="display:none;">${bb}</textarea>`);
    $('#spoiler').show(); $('#copyBtn').show();
}

function copyToClipboard() {
    var c = document.getElementById("bbcopy"); 
    c.style.display = "block"; 
    c.select(); 
    document.execCommand("copy"); 
    c.style.display = "none";
    document.getElementById("copyBtn").innerHTML = "âœ… Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î—ÎšÎ•!"; 
    setTimeout(function(){ 
        document.getElementById("copyBtn").innerHTML = "ğŸ“‘ Î‘ÎÎ¤Î™Î“Î¡Î‘Î¦Î— BB-CODE"; 
    }, 2000);
}

// Î•Î´Ï Î²Î³Î¬Î»Î±Î¼Îµ Ï„Î¿Î½ ÎºÏ‰Î´Î¹ÎºÏŒ - Î¤Î¿ Ï€ÎµÏÎ¹ÎµÏ‡ÏŒÎ¼ÎµÎ½Î¿ ÎµÎ¼Ï†Î±Î½Î¯Î¶ÎµÏ„Î±Î¹ Î±Î¼Î­ÏƒÏ‰Ï‚
window.onload = function() {
    document.getElementById("protected-content").style.display = "block";
};
</script>
</body>
</html>
